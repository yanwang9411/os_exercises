# lec5 SPOC思考题


NOTICE
- 有"w3l1"标记的题是助教要提交到学堂在线上的。
- 有"w3l1"和"spoc"标记的题是要求拿清华学分的同学要在实体课上完成，并按时提交到学生对应的git repo上。
- 有"hard"标记的题有一定难度，鼓励实现。
- 有"easy"标记的题很容易实现，鼓励实现。
- 有"midd"标记的题是一般水平，鼓励实现。


## 个人思考题
---

请简要分析最优匹配，最差匹配，最先匹配，buddy systemm分配算法的优势和劣势，并尝试提出一种更有效的连续内存分配算法 (w3l1)
```
  + 采分点：说明四种算法的优点和缺点
  - 答案没有涉及如下3点；（0分）
  - 正确描述了二种分配算法的优势和劣势（1分）
  - 正确描述了四种分配算法的优势和劣势（2分）
  - 除上述两点外，进一步描述了一种更有效的分配算法（3分）
 ```
- [x]  
- 


> 最差匹配： 
>
> 中等大小的分配较多时，效果最好，避免出现太多的小碎片； 
>

> 缺点：释放分区较慢，外部碎片，容易破坏大的空闲分区，因此后续难以分配大的分区
>
> 最先匹配：简单 ， 在高地址空间有大块内存；   
>
> 缺点 ： 外部碎片，分配大块时较慢
> 
> 最优匹配：
> 
> 大部分分配的尺寸较小时，效果很好， · 可避免大的空闲分区被拆分，· 可减小外部碎片的大小 · 相对简单
>
> 缺点： 外部碎片，释放分区较慢，容易产生很多无用的小碎片

>
> buddysystem: 
>
>优点： 释放分区快，简单，分配内存整齐
>
> 缺点：合并条件严格会产生较多碎片

>  

## 小组思考题

请参考ucore lab2代码，采用`struct pmm_manager` 根据你的`学号 mod 4`的结果值，选择四种（0:最优匹配，1:最差匹配，2:最先匹配，3:buddy systemm）分配算法中的一种，在应用程序层面来实现，并给出测试用例。 (spoc)

--- 

## 扩展思考题

阅读[slab分配算法](http://en.wikipedia.org/wiki/Slab_allocation)，尝试在应用程序中实现slab分配算法，给出设计方案和测试用例。


